# Baseline测试结果目录

此目录存储用于数值一致性验证的baseline结果。

## 目录结构

```
baseline/
├── README.md              # 本文件
├── test_cases.json        # 测试案例配置
├── case_1/               # 测试案例1结果
│   ├── config.json       # 配置信息
│   ├── parameters.pkl    # EM估计参数(A, Q, H, R)
│   ├── states.pkl        # 卡尔曼滤波状态
│   ├── predictions.pkl   # 预测结果
│   └── metrics.json      # 评估指标
├── case_2/               # 测试案例2结果
├── case_3/               # 测试案例3结果
├── case_4/               # 测试案例4结果
└── case_5/               # 测试案例5结果
```

## 测试案例设计

为覆盖不同场景，设计5个典型测试案例：

### Case 1: 基础配置（小规模）
- 目标变量: 工业增加值同比增速
- 指标数量: 5个
- 因子数: 2
- 训练集: 2020-01-01 至 2022-12-31
- 验证集: 2023-01-01 至 2023-06-30
- 特点: 最小配置，快速验证基础功能

### Case 2: 中等规模
- 目标变量: 工业增加值同比增速
- 指标数量: 15个
- 因子数: 4
- 训练集: 2018-01-01 至 2022-12-31
- 验证集: 2023-01-01 至 2023-12-31
- 特点: 中等复杂度，平衡性能和准确性

### Case 3: 大规模配置
- 目标变量: 工业增加值同比增速
- 指标数量: 30个
- 因子数: 6
- 训练集: 2015-01-01 至 2022-12-31
- 验证集: 2023-01-01 至 2023-12-31
- 特点: 高维数据，测试算法稳定性

### Case 4: 变量选择场景
- 目标变量: 工业增加值同比增速
- 初始指标: 20个
- 启用后向选择: 是
- 因子数: 3
- 训练集: 2019-01-01 至 2022-12-31
- 验证集: 2023-01-01 至 2023-06-30
- 特点: 测试变量选择逻辑

### Case 5: 边界情况
- 目标变量: 工业增加值同比增速
- 指标数量: 3个（最小）
- 因子数: 1（最小）
- 训练集: 2021-01-01 至 2022-12-31（短期）
- 验证集: 2023-01-01 至 2023-03-31
- 特点: 测试边界条件处理

## 使用方法

### 生成baseline

```bash
cd E:\同步文件夹\HTFA
python dashboard/DFM/train_ref/tests/consistency/baseline/generate_baseline.py
```

### 运行一致性对比

```bash
pytest dashboard/DFM/train_ref/tests/consistency/ -v
```

## 验收标准

所有测试案例的baseline结果必须包含：
- ✓ 完整的模型参数（A, Q, H, R矩阵）
- ✓ 完整的状态估计（filtered和smoothed）
- ✓ 样本内和样本外预测结果
- ✓ 评估指标（RMSE, Hit Rate, Correlation）
- ✓ 配置信息（可复现）

## 注意事项

1. **不修改baseline**: baseline一旦生成，不得修改，作为"黄金标准"
2. **版本控制**: baseline结果不应提交到git（已添加到.gitignore）
3. **可重现性**: 必须设置固定随机种子（SEED=42）
4. **数据对齐**: 确保train_ref和baseline使用相同的数据和配置
